# ğŸ¥­ MangoAndGuava

## ì‰½ê³  ì•ˆì „í•œ ì¤‘ê³  ê±°ë˜, í¸ë¦¬í•œ ë§ê³ ì™€ êµ¬ì•„ë°”
![image](https://github.com/user-attachments/assets/99cc3c3e-116b-4e73-836d-3220bd42fbfd)


## í”„ë¡œì íŠ¸ ì†Œê°œ

<p align="justify">
ë§ê³ ì™€ êµ¬ì•„ë°”ì—ì„œëŠ” ê°„í¸í•˜ê²Œ ìƒí’ˆì„ ë“±ë¡í•˜ê³ , ì‹¤ì‹œê°„ ì±„íŒ…ìœ¼ë¡œ êµ¬ë§¤ìì™€ ì†Œí†µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <br>
ì§ê±°ë˜ë¶€í„° íƒë°° ê±°ë˜ê¹Œì§€ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê±°ë˜í•˜ê³ , ì°œê³¼ ì±„íŒ… ì•Œë¦¼ìœ¼ë¡œ ë¹ ë¥¸ ê±°ë˜ë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!
</p>
<br>

## figma
[ë°”ë¡œê°€ê¸°](https://www.figma.com/design/nGfCAaAjbW0PkpIKtBDisv/%EC%A4%91%EA%B3%A0%EA%B1%B0%EB%9E%98%EC%82%AC%EC%9D%B4%ED%8A%B8?node-id=0-1&t=vlji5nGXAu63nthK-0)

<br>

## íŒ€ì› ì†Œê°œ
| ì‹ ê·œì² (BE, FE:<br> ì±„íŒ…, ì•Œë¦¼, ê²€ìƒ‰í˜ì´ì§€)     |  ì¥ìœ ë¦¬(FE:ì¹´í…Œê³ ë¦¬, ë©”ì¸, <br>ë“±ë¡, ìƒì„¸, ë§ˆì´í˜ì´ì§€)       |
| :-----------------: | :-----------------: |
| <img src="https://github.com/zzannorita/LetsDoIt/assets/135790442/ddb59533-4cba-43c1-9b0c-cf5e1c94137d" alt="KakaoTalk_20240502_172636004" width="200" height="200" /><br> |   <img src="https://github.com/zzannorita/LetsDoIt/assets/135790442/3d940561-3601-4e21-9f78-41351132dc0e" alt="KakaoTalk_20240102_200636725" width="200" height="200" /><br> |

<br>

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
![React.js](https://img.shields.io/badge/React.js-61DAFB?style=for-the-badge&logo=react&logoColor=white)
![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E)
![Axios](https://img.shields.io/badge/Axios-007ACC?style=for-the-badge&logo=axios&logoColor=white)

### Backend
![Node.js](https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)
![Express.js](https://img.shields.io/badge/Express.js-000000?style=for-the-badge&logo=express&logoColor=white)
![Axios](https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white)
![Websocket](https://img.shields.io/badge/Websocket-808080?style=for-the-badge&logo=websocket&logoColor=white)

### DataBase
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)

### Tool
![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)
![Figma](https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white)
![VSCode](https://img.shields.io/badge/VS_Code-007ACC?style=for-the-badge&logo=visual-studio-code&logoColor=white)

### Communication
![Notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white)
![Discord](https://img.shields.io/badge/Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white)

<br>

## ERD
![image](https://github.com/user-attachments/assets/77b892ce-8bd1-4793-a158-c8873d972505)
+ MySQL: chat, notifications, product, productbookmark, productimage, recentviews, shop, shopbookmark, shopcomment, user, wishlist

<br>

## ì£¼ìš” ê¸°ëŠ¥

### ìƒí’ˆ íŒë§¤ ë° êµ¬ë§¤
+ ê°„í¸í•˜ê²Œ ìƒí’ˆì„ ë“±ë¡í•˜ê³  êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
+ ì§ê±°ë˜ì™€ íƒë°° ê±°ë˜ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
### ì‹¤ì‹œê°„ ì±„íŒ…
+ êµ¬ë§¤ìì™€ íŒë§¤ìê°€ ì§ì ‘ ì±„íŒ…ì„ í†µí•´ ì†Œí†µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
### ì•Œë¦¼
+ ì°œí•˜ê¸° ë° ì±„íŒ… ìš”ì²­ ì‹œ ì‹¤ì‹œê°„ ì•Œë¦¼ì„ ì œê³µí•©ë‹ˆë‹¤.
### ì°œí•˜ê¸°
+ ê´€ì‹¬ ìˆëŠ” ìƒí’ˆì„ ì°œí•˜ì—¬ ì‰½ê²Œ ë‹¤ì‹œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
### ìµœê·¼ ë³¸ ìƒí’ˆ
+ ì‚¬ìš©ìê°€ ìµœê·¼ì— í™•ì¸í•œ ìƒí’ˆì„ ê¸°ë¡í•˜ì—¬ ë¹ ë¥´ê²Œ ë‹¤ì‹œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

## ì£¼ìš” í™”ë©´
<table>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/9aed819c-f736-4038-bb63-05200a8cde1e" alt="ë©”ì¸í˜ì´ì§€" width="500" height="220" /><br>
      <strong>ë©”ì¸í˜ì´ì§€</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/33aa60d0-aea4-43c1-928f-9d9972f4823f" alt="ì¹´í…Œê³ ë¦¬" width="500" height="220" /><br>
      <strong>ì¹´í…Œê³ ë¦¬</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/b21c3222-b051-4524-a5b7-ece55ad1a17c" alt="íŒë§¤í˜ì´ì§€-1" width="500" height="220" /><br>
      <strong>íŒë§¤í˜ì´ì§€-1</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/6cb2ee8a-6029-45c3-bbec-6481b651f12f" alt="íŒë§¤í˜ì´ì§€-2" width="500" height="220" /><br>
      <strong>íŒë§¤í˜ì´ì§€-2</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/c1670ac8-05f4-49de-878c-91bd16a05845" alt="ê²€ìƒ‰í˜ì´ì§€" width="500" height="220" /><br>
      <strong>ê²€ìƒ‰í˜ì´ì§€</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/003b530c-df5e-4d09-ae33-dfceac347427" alt="ìƒì„¸í˜ì´ì§€" width="500" height="220" /><br>
      <strong>ìƒì„¸í˜ì´ì§€</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/6ed01f40-c7cb-4174-be1e-dd14b5290051" alt="ìˆ˜ì •í˜ì´ì§€" width="500" height="220" /><br>
      <strong>ìˆ˜ì •í˜ì´ì§€</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/a13be9d6-afe0-44d8-b187-6545a50ddcc1" alt="íŒë§¤ì ë§ˆì´í˜ì´ì§€" width="500" height="220" /><br>
      <strong>íŒë§¤ì ë§ˆì´í˜ì´ì§€</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/2b82b8a7-d57f-429d-9b0c-575a0a7a179c" alt="ë§ˆì´í˜ì´ì§€" width="500" height="220" /><br>
      <strong>ë§ˆì´í˜ì´ì§€</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/91788848-abdd-4e7e-bb9e-c1745fdfda39" alt="íŒë§¤ë¬¼í’ˆ í˜ì´ì§€" width="500" height="220" /><br>
      <strong>íŒë§¤ë¬¼í’ˆ í˜ì´ì§€</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/8ca0a3a1-41dd-4f47-9ac0-523f5c1326b0" alt="ê±°ë˜í›„ê¸°" width="500" height="220" /><br>
      <strong>ê±°ë˜í›„ê¸°</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/efcc22a5-4788-45e4-bf48-6bb6d19ac41c" alt="ì°œí•œìƒí’ˆ" width="500" height="220" /><br>
      <strong>ì°œí•œìƒí’ˆ</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/45c9d196-b80f-42c0-b64d-49eecd5f10e1" alt="ì¦ê²¨ì°¾ê¸°" width="500" height="220" /><br>
      <strong>ì¦ê²¨ì°¾ê¸°</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/3e82beb7-01e5-47ac-bd75-2dba879cc39f" alt="ì„¤ì •í˜ì´ì§€" width="500" height="220" /><br>
      <strong>ì„¤ì •í˜ì´ì§€</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/ec7cbbcf-aaf8-45bb-a7a3-b1d79f374d1e" alt="ì±„íŒ…í˜ì´ì§€" width="500" height="220" /><br>
      <strong>ì±„íŒ…í˜ì´ì§€</strong>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/d9dcd8b3-f227-4401-946a-7ae17b613ae9" alt="í›„ê¸°ì‘ì„±" width="500" height="220" /><br>
      <strong>í›„ê¸°ì‘ì„±</strong>
    </td>
  </tr>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/9b17e4e6-d7af-4c1c-9195-4196f3237d08" alt="ì•Œë¦¼ë¦¼" width="500" height="220" /><br>
      <strong>ì•Œë¦¼</strong>
    </td>
  </tr>
</table>

<br>

## ì‹œì—° ì˜ìƒ
<img src="https://github.com/user-attachments/assets/ce9b77a6-9277-4e0e-a87e-7f15b81373af"  alt="ì‹œì—°ì˜ìƒ" width="500" height="220" />

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ER ë‹¤ì´ì–´ê·¸ë¨

```mermaid
erDiagram
    USER {
        bigint userId PK
        varchar nickname
        varchar email
        varchar address
        varchar profileImage
        varchar account
        datetime createdAt
        varchar refreshToken
    }

    SHOP {
        bigint userId PK
        text shopInfo
        float shopAvg
    }

    PRODUCT {
        bigint productId PK
        bigint userId FK
        varchar productName
        int productPrice
        varchar productCategory
        varchar productInfo
        varchar productState
        int tradingMethod
        varchar tradingAddress
        int isTrade
        int isShippingFee
        varchar tradeState
        int wishlistCount
        int views
        datetime productCreatedDate
        datetime productUpdatedDate
        bigint buyerUserId
    }

    PRODUCTIMAGE {
        bigint imageId PK
        bigint productId FK
        varchar productImage
    }

    PRODUCTBOOKMARK {
        bigint userId FK
        bigint productId FK
        datetime createdAt
    }

    SHOPCOMMENT {
        bigint commentId PK
        bigint shopOwnerUserId FK
        bigint commentUserId FK
        bigint purchasedProductId FK
        text comment
        float avg
        datetime commentDate
    }

    SHOPBOOKMARK {
        bigint userId FK
        bigint bookmarkUserId FK
    }

    CHAT {
        bigint id PK
        bigint room_id
        bigint user_from FK
        bigint user_to FK
        text message
        datetime created_at
    }

    RECENTVIEWS {
        bigint id PK
        bigint userId FK
        bigint productId FK
        datetime viewedAt
    }

    NOTIFICATIONS {
        bigint id PK
        bigint userId FK
        varchar type
        text content
        json extraData
        datetime createdAt
    }

    %% Relationships
    USER ||--o{ PRODUCT : creates
    USER ||--o{ PRODUCTBOOKMARK : bookmarks
    USER ||--o{ SHOPCOMMENT : writes
    USER ||--o{ SHOPBOOKMARK : follows
    USER ||--o{ RECENTVIEWS : views
    USER ||--o{ CHAT : sends
    USER ||--o{ NOTIFICATIONS : receives
    USER ||--|| SHOP : owns

    PRODUCT ||--o{ PRODUCTIMAGE : has
    PRODUCT ||--o{ PRODUCTBOOKMARK : bookmarked
    PRODUCT ||--o{ SHOPCOMMENT : reviewed
    PRODUCT ||--o{ CHAT : belongs
    PRODUCT ||--o{ RECENTVIEWS : viewed

    SHOP ||--o{ SHOPCOMMENT : receives
    SHOP ||--o{ SHOPBOOKMARK : followed
```

### ìƒì„¸ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ

#### 1. USER (ì‚¬ìš©ì)
| Column | Type | Description |
|--------|------|-------------|
| `userId` | BIGINT | ì‚¬ìš©ì PK (ì¹´ì¹´ì˜¤ ID) |
| `nickname` | VARCHAR(255) | ë‹‰ë„¤ì„ |
| `email` | VARCHAR(255) | ì´ë©”ì¼ |
| `address` | VARCHAR(500) | ì£¼ì†Œ |
| `profileImage` | VARCHAR(500) | í”„ë¡œí•„ ì´ë¯¸ì§€ ê²½ë¡œ |
| `account` | VARCHAR(100) | ê³„ì¢Œë²ˆí˜¸ |
| `createdAt` | DATETIME | ê°€ì…ì¼ |
| `refreshToken` | VARCHAR(500) | ì¹´ì¹´ì˜¤ ë¦¬í”„ë ˆì‹œ í† í° |

#### 2. SHOP (ìƒì )
| Column | Type | Description |
|--------|------|-------------|
| `userId` | BIGINT | ìƒì  ì†Œìœ ì PK (FK to user) |
| `shopInfo` | TEXT | ìƒì  ì†Œê°œê¸€ |
| `shopAvg` | FLOAT | í‰ê·  í‰ì  |

#### 3. PRODUCT (ìƒí’ˆ)
| Column | Type | Description |
|--------|------|-------------|
| `productId` | BIGINT | ìƒí’ˆ PK |
| `userId` | BIGINT | íŒë§¤ì ID (FK to user) |
| `productName` | VARCHAR(255) | ìƒí’ˆëª… |
| `productPrice` | INT | ê°€ê²© |
| `productCategory` | VARCHAR(100) | ì¹´í…Œê³ ë¦¬ |
| `productInfo` | TEXT | ìƒí’ˆ ì„¤ëª… |
| `productState` | VARCHAR(50) | ìƒí’ˆ ìƒíƒœ |
| `tradingMethod` | INT | ê±°ë˜ ë°©ì‹ (0: ì§ê±°ë˜, 1: ë°°ì†¡) |
| `tradingAddress` | VARCHAR(500) | ê±°ë˜ ê°€ëŠ¥ ì§€ì—­ |
| `isTrade` | INT | êµí™˜ ê°€ëŠ¥ ì—¬ë¶€ |
| `isShippingFee` | INT | ë°°ì†¡ë¹„ í¬í•¨ ì—¬ë¶€ |
| `tradeState` | VARCHAR(20) | ê±°ë˜ ìƒíƒœ (íŒë§¤ì¤‘, ì˜ˆì•½ì¤‘, íŒë§¤ì™„ë£Œ) |
| `wishlistCount` | INT | ì°œ ê°œìˆ˜ |
| `views` | INT | ì¡°íšŒìˆ˜ |
| `productCreatedDate` | DATETIME | ë“±ë¡ì¼ |
| `productUpdatedDate` | DATETIME | ìˆ˜ì •ì¼ |
| `buyerUserId` | BIGINT | êµ¬ë§¤ì ID |

#### 4. PRODUCTIMAGE (ìƒí’ˆ ì´ë¯¸ì§€)
| Column | Type | Description |
|--------|------|-------------|
| `imageId` | BIGINT | ì´ë¯¸ì§€ PK |
| `productId` | BIGINT | ìƒí’ˆ ID (FK to product) |
| `productImage` | VARCHAR(500) | ì´ë¯¸ì§€ íŒŒì¼ëª… |

#### 5. PRODUCTBOOKMARK (ì°œí•˜ê¸°)
| Column | Type | Description |
|--------|------|-------------|
| `userId` | BIGINT | ì‚¬ìš©ì ID (FK to user) |
| `productId` | BIGINT | ìƒí’ˆ ID (FK to product) |
| `createdAt` | DATETIME | ì°œí•˜ê¸° ì¼ì‹œ |

#### 6. SHOPCOMMENT (ìƒì  ë¦¬ë·°)
| Column | Type | Description |
|--------|------|-------------|
| `commentId` | BIGINT | ë¦¬ë·° PK |
| `shopOwnerUserId` | BIGINT | ìƒì  ì†Œìœ ì ID (FK to user) |
| `commentUserId` | BIGINT | ë¦¬ë·° ì‘ì„±ì ID (FK to user) |
| `purchasedProductId` | BIGINT | êµ¬ë§¤í•œ ìƒí’ˆ ID (FK to product) |
| `comment` | TEXT | ë¦¬ë·° ë‚´ìš© |
| `avg` | FLOAT | í‰ì  (1-5) |
| `commentDate` | DATETIME | ë¦¬ë·° ì‘ì„±ì¼ |

#### 7. SHOPBOOKMARK (ìƒì  íŒ”ë¡œìš°)
| Column | Type | Description |
|--------|------|-------------|
| `userId` | BIGINT | íŒ”ë¡œìš°í•œ ì‚¬ìš©ì ID (FK to user) |
| `bookmarkUserId` | BIGINT | íŒ”ë¡œìš° ëŒ€ìƒ ID (FK to user) |

#### 8. CHAT (ì±„íŒ… ë©”ì‹œì§€)
| Column | Type | Description |
|--------|------|-------------|
| `id` | BIGINT | ë©”ì‹œì§€ PK |
| `room_id` | BIGINT | ì±„íŒ…ë°© ID (user1-user2-productId í˜•ì‹) |
| `user_from` | BIGINT | ë°œì‹ ì ID (FK to user) |
| `user_to` | BIGINT | ìˆ˜ì‹ ì ID (FK to user) |
| `message` | TEXT | ë©”ì‹œì§€ ë‚´ìš© |
| `created_at` | DATETIME | ì „ì†¡ ì¼ì‹œ |

#### 9. RECENTVIEWS (ìµœê·¼ ë³¸ ìƒí’ˆ)
| Column | Type | Description |
|--------|------|-------------|
| `id` | BIGINT | PK |
| `userId` | BIGINT | ì‚¬ìš©ì ID (FK to user) |
| `productId` | BIGINT | ìƒí’ˆ ID (FK to product) |
| `viewedAt` | DATETIME | ì¡°íšŒ ì¼ì‹œ |

#### 10. NOTIFICATIONS (ì•Œë¦¼)
| Column | Type | Description |
|--------|------|-------------|
| `id` | BIGINT | ì•Œë¦¼ PK |
| `userId` | BIGINT | ìˆ˜ì‹ ì ID (FK to user) |
| `type` | VARCHAR(50) | ì•Œë¦¼ ìœ í˜• (chat, like, follow) |
| `content` | TEXT | ì•Œë¦¼ ë‚´ìš© |
| `extraData` | JSON | ì¶”ê°€ ë°ì´í„° (roomId, ìƒí’ˆëª… ë“±) |
| `createdAt` | DATETIME | ì•Œë¦¼ ìƒì„± ì¼ì‹œ |

---

## API ì—”ë“œí¬ì¸íŠ¸

### User (ì‚¬ìš©ì)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/user/kakao` | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| GET | `/user/me` | í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| GET | `/user/other` | ë‹¤ë¥¸ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| POST | `/user/logout` | ì¹´ì¹´ì˜¤ ë¡œê·¸ì•„ì›ƒ |
| PUT | `/user/profile` | í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ |

### Products (ìƒí’ˆ)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/products` | ìƒí’ˆ ëª©ë¡ ì¡°íšŒ (í•„í„°ë§/ì •ë ¬/í˜ì´ì§€ë„¤ì´ì…˜) |
| GET | `/products/detail` | ìƒí’ˆ ìƒì„¸ ì¡°íšŒ |
| POST | `/products/bookmark` | ì°œí•˜ê¸° ì¶”ê°€/ì‚­ì œ |
| GET | `/products/bookmark` | ì°œ ëª©ë¡ ì¡°íšŒ |
| PUT | `/products/state` | ê±°ë˜ ìƒíƒœ ìˆ˜ì • |
| PUT | `/products/view` | ì¡°íšŒìˆ˜ ì¦ê°€ |
| PUT | `/products/buyer` | êµ¬ë§¤ì ì •ë³´ ì—…ë°ì´íŠ¸ |

### Shop (ìƒì )
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/shop` | ìƒì  ì •ë³´ ì¡°íšŒ |
| PUT | `/shop` | ìƒì  ì •ë³´ ìˆ˜ì • |
| GET | `/shop/my` | ë‚´ ìƒì  ëŒ€ì‹œë³´ë“œ |
| POST | `/shop/bookmark` | ìƒì  ë¶ë§ˆí¬ (íŒ”ë¡œìš°) |
| DELETE | `/shop/bookmark` | ë¶ë§ˆí¬ ì‚­ì œ |
| POST | `/shop/comment` | ë¦¬ë·° ì‘ì„± |
| GET | `/shop/comment` | ë¦¬ë·° ì¡°íšŒ |
| GET | `/shop/recent` | ìµœê·¼ ë³¸ ìƒí’ˆ ì¡°íšŒ |
| POST | `/shop/recent` | ìµœê·¼ ë³¸ ìƒí’ˆ ì¶”ê°€ |

### Chat (ì±„íŒ…)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/chat/list` | ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ |
| GET | `/chat/each` | íŠ¹ì • ì±„íŒ…ë°© ë©”ì‹œì§€ ì¡°íšŒ |
| GET | `/chat/number` | ìƒí’ˆë³„ ì±„íŒ…ë°© ìˆ˜ ì¡°íšŒ |

### Alarm (ì•Œë¦¼)
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/alarm` | ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ |

### Token (í† í°)
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/refresh-token` | ì•¡ì„¸ìŠ¤ í† í° ê°±ì‹  |

---

## ê¸°ìˆ ì  ë„ì „ê³¼ í•´ê²°

### í”„ë¡ íŠ¸ì—”ë“œ ê¸°ìˆ ì  ë„ì „ê³¼ í•´ê²°

#### ë„ì „ 1: WebSocket Context APIë¥¼ í†µí•œ ì „ì—­ ì‹¤ì‹œê°„ ë©”ì‹œì§€ ê´€ë¦¬

**ë¬¸ì œ:**
- ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸(Header, Chat, ProductsCard)ì—ì„œ ë™ì‹œì— WebSocket ì‚¬ìš©
- ì¤‘ë³µ ì—°ê²° ë° ìƒíƒœ ë¶ˆì¼ì¹˜ ë°œìƒ ê°€ëŠ¥
- ì•Œë¦¼ê³¼ ì±„íŒ… ë©”ì‹œì§€ íƒ€ì…ë³„ ë¶„ê¸° ì²˜ë¦¬ í•„ìš”

**í•´ê²°ì±…:**
```javascript
// contexts/WebSocketContext.js
const WebSocketProvider = ({ children }) => {
  const [newAlarm, setNewAlarm] = useState(null);
  const [newChat, setNewChat] = useState(null);
  const socketRef = useRef(null);

  useEffect(() => {
    if (!userId) return;
    socketRef.current = new WebSocket("ws://localhost:3001");
    
    socketRef.current.onmessage = (event) => {
      const newMessage = JSON.parse(event.data);
      if (newMessage.type === "notification") {
        setNewAlarm(newMessage);
      }
      if (newMessage.type === "chatting") {
        setNewChat(newMessage);
      }
    };
  }, [userId]);

  return (
    <WebSocketContext.Provider value={{ sendMessage, newChat, newAlarm }}>
      {children}
    </WebSocketContext.Provider>
  );
};
```

**ì„±ê³¼:**
- ì¤‘ë³µ ì—°ê²° ì—†ì´ ì „ì—­ì—ì„œ í•˜ë‚˜ì˜ WebSocket ì‚¬ìš©
- useContext í›…ìœ¼ë¡œ ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œë“  ë©”ì‹œì§€ ìˆ˜ì‹  ê°€ëŠ¥
- ì•Œë¦¼/ì±„íŒ… íƒ€ì…ë³„ ëª…í™•í•œ ìƒíƒœ ë¶„ë¦¬

#### ë„ì „ 2: Axios Interceptorë¥¼ í†µí•œ í† í° ìë™ ê°±ì‹ 

**ë¬¸ì œ:**
- ì•¡ì„¸ìŠ¤ í† í° ë§Œë£Œ ì‹œ 401 ì—ëŸ¬ ë°œìƒ
- ì‚¬ìš©ìì—ê²Œ ë§¤ë²ˆ ì¬ë¡œê·¸ì¸ ìš”êµ¬ ë¶ˆê°€
- í† í° ê°±ì‹  í›„ ì‹¤íŒ¨í•œ ìš”ì²­ ì¬ì‹œë„ í•„ìš”

**í•´ê²°ì±…:**
```javascript
// axios.js
axiosInstance.interceptors.response.use(
  (response) => response,
  async (error) => {
    const originalRequest = error.config;
    if (
      error.response?.status === 401 &&
      error.response.data.errorType === "TOKEN_EXPIRED" &&
      !originalRequest._retry
    ) {
      originalRequest._retry = true;
      const userId = Cookies.get("userId");
      const response = await axios.post("http://localhost:3001/refresh-token", { userId });
      const newAccessToken = response.data.accessToken;
      Cookies.set("accessToken", newAccessToken);
      originalRequest.headers["Authorization"] = `Bearer ${newAccessToken}`;
      return axiosInstance(originalRequest);
    }
    return Promise.reject(error);
  }
);
```

**ì„±ê³¼:**
- 401 ì—ëŸ¬ ë°œìƒ ì‹œ ìë™ í† í° ê°±ì‹ 
- ê°±ì‹  í›„ ì›ë˜ ìš”ì²­ ìë™ ì¬ì‹œë„
- ë¬´í•œ ë£¨í”„ ë°©ì§€ (_retry í”Œë˜ê·¸)

#### ë„ì „ 3: URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ê¸°ë°˜ í•„í„°ë§ ìƒíƒœ ê´€ë¦¬

**ë¬¸ì œ:**
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ í•„í„° ìƒíƒœ ì´ˆê¸°í™”
- ë‹¤ì–‘í•œ í•„í„° ì¡°í•© (ì¹´í…Œê³ ë¦¬/ê°€ê²©/ì§€ì—­/ì •ë ¬)
- ë¸Œë¼ìš°ì € ë’¤ë¡œ ê°€ê¸° ì‹œ ìƒíƒœ ë³µì› í•„ìš”

**í•´ê²°ì±…:**
```javascript
// pages/Search.js
const Search = () => {
  const location = useLocation();
  const navigate = useNavigate();
  
  useEffect(() => {
    const queryString = new URLSearchParams(location.search).toString();
    if (queryString) fetchProducts(queryString);
  }, [location.search]);
  
  const handleSortChange = (sortType) => {
    const params = new URLSearchParams(location.search);
    params.set("sort", sortType);
    navigate(`/products?${params.toString()}`);
  };
};
```

**ì„±ê³¼:**
- í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ í•„í„° ìƒíƒœ ìœ ì§€
- ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ ì—°ë™ (ë’¤ë¡œ/ì•ìœ¼ë¡œ ê°€ê¸° ê°€ëŠ¥)
- URL ê³µìœ  ì‹œ ë™ì¼í•œ í•„í„° ìƒíƒœ ì ìš©

#### ë„ì „ 4: 3ë‹¨ê³„ ê³„ì¸µ ì¹´í…Œê³ ë¦¬ ë§ˆìš°ìŠ¤ í˜¸ë²„ ë„¤ë¹„ê²Œì´ì…˜

**ë¬¸ì œ:**
- ëŒ€ë¶„ë¥˜ > ì¤‘ë¶„ë¥˜ > ì†Œë¶„ë¥˜ 3ë‹¨ê³„ í‘œì‹œ
- ë§ˆìš°ìŠ¤ ì´ë™ ì‹œ ê° ë‹¨ê³„ë³„ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
- ê° ì¹´í…Œê³ ë¦¬ í´ë¦­ ì‹œ í•´ë‹¹ URLë¡œ ì´ë™

**í•´ê²°ì±…:**
```javascript
// components/Category.js
const Category = () => {
  const [hoveredCategory, setHoveredCategory] = useState(null);
  const [hoveredSubCategory, setHoveredSubCategory] = useState(null);
  
  return (
    <div onMouseLeave={() => { setHoveredCategory(null); setHoveredSubCategory(null); }}>
      <div className="navbar">
        {categories.map((category) => (
          <div onMouseEnter={() => setHoveredCategory(category)}>
            <Link to={category.link}>{category.name}</Link>
          </div>
        ))}
      </div>
      {hoveredCategory?.subCategories && (
        <div className="subNavbar">
          {hoveredCategory.subCategories.map((sub) => (
            <div onMouseEnter={() => setHoveredSubCategory(sub)}>
              <Link to={sub.link}>{sub.name}</Link>
            </div>
          ))}
        </div>
      )}
    </div>
  );
};
```

**ì„±ê³¼:**
- ë§ˆìš°ìŠ¤ ì´ë™ ì—†ì´ë„ í˜„ì¬ ì„ íƒëœ ì¹´í…Œê³ ë¦¬ í‘œì‹œ
- ê° ë‹¨ê³„ë³„ ë…ë¦½ì ì¸ hover ìƒíƒœ ê´€ë¦¬
- useCategory.js ë°ì´í„°ì™€ ì™„ë²½ ë™ê¸°í™”

#### ë„ì „ 5: ë°˜ì‘í˜• ì±„íŒ… UI (ëª¨ë°”ì¼/ë°ìŠ¤í¬í†± ë¶„ë¦¬)

**ë¬¸ì œ:**
- ëª¨ë°”ì¼ì—ì„œ ì±„íŒ…ë°© ëª©ë¡ê³¼ ëŒ€í™”ë¥¼ ë™ì‹œì— í‘œì‹œ ë¶ˆê°€
- í™”ë©´ í¬ê¸°ì— ë”°ë¥¸ ë‹¤ë¥¸ ë ˆì´ì•„ì›ƒ í•„ìš”
- í„°ì¹˜ ì¸í„°í˜ì´ìŠ¤ ìµœì í™”

**í•´ê²°ì±…:**
```javascript
// pages/Chat.js
const Chat = () => {
  const isMobile = useMediaQuery({ maxWidth: 1000 });
  
  return (
    <div>
      {!isMobile && (
        <div className={chatStyle.chatContainer}>
          <div className={chatStyle.chatListBox}>{/* ëª©ë¡ */}</div>
          <div className={chatStyle.chattingBox}>{/* ëŒ€í™” */}</div>
        </div>
      )}
      {isMobile && (
        <div>
          {!selectedRoomId ? (
            <div className={chatStyle.chatListBox}>{/* ëª©ë¡ */}</div>
          ) : (
            <div className={chatStyle.chattingBox}>{/* ëŒ€í™” */}</div>
          )}
        </div>
      )}
    </div>
  );
};
```

**ì„±ê³¼:**
- ë°˜ì‘í˜•æ–·ç‚¹ 1000pxë¡œ ëª¨ë°”ì¼/ë°ìŠ¤í¬í†± ëª…í™•íˆ ë¶„ë¦¬
- ëª¨ë°”ì¼ì—ì„œ ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ìœ¼ë¡œ ì±„íŒ…ë°© ëª©ë¡ ë³µê·€
- ë°ìŠ¤í¬í†±ì—ì„œ íš¨ìœ¨ì ì¸ 2ë¶„í•  ë ˆì´ì•„ì›ƒ ì œê³µ

#### ë„ì „ 6: ì´ë¯¸ì§€ ìˆœì„œ ë³´ì¥ì„ ìœ„í•œ FormData + JSON ì „ì†¡

**ë¬¸ì œ:**
- Multer ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ìˆœì„œ ë³´ì¥ ë¶ˆê°€
- í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì •í•œ ì´ë¯¸ì§€ ìˆœì„œì™€ ì„œë²„ ì €ì¥ ìˆœì„œ ë¶ˆì¼ì¹˜

**í•´ê²°ì±…:**
```javascript
// pages/Regist.js
const handleSubmit = () => {
  const formData = new FormData();
  imageFiles.forEach((file) => {
    formData.append("productImage", file);
  });
  formData.append("imageOrder", JSON.stringify(imageFiles.map((_, index) => index)));
  axiosInstance.post("/add-product", formData);
};
```

**ì„±ê³¼:**
- ì´ë¯¸ì§€ íŒŒì¼ê³¼ ìˆœì„œ ì •ë³´ë¥¼ ë™ì‹œì— ì „ì†¡
- ì„œë²„ì—ì„œ imageOrder JSONì„ íŒŒì‹±í•˜ì—¬ ì •í™•í•œ ìˆœì„œ ë³´ì¥
- ë°±ì—”ë“œì—ì„œ íŒŒì¼ëª…ì— ìˆœì„œ ë²ˆí˜¸ í¬í•¨

#### ë„ì „ 7: ìµœê·¼ ë³¸ ìƒí’ˆ ê´€ë¦¬ (URL ë³€ê²½ ê°ì§€ + ì´ë¯¸ì§€ ë³‘ë ¬ ë¡œë”©)

**ë¬¸ì œ:**
- í˜ì´ì§€ ì´ë™í•  ë•Œë§ˆë‹¤ ìµœê·¼ ë³¸ ìƒí’ˆ ì—…ë°ì´íŠ¸ í•„ìš”
- ì—¬ëŸ¬ ìƒí’ˆ ì´ë¯¸ì§€ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë¡œë”©

**í•´ê²°ì±…:**
```javascript
// components/MainLayout.js
useEffect(() => {
  axiosInstance.get("/recent-view").then((response) => {
    const ids = response.data.data.map((item) => item.productId);
    setProductId([...new Set(ids)]);
  });
}, [location.pathname]);

useEffect(() => {
  const fetchImages = async () => {
    const imageArray = productId.map((id) =>
      axiosInstance.get(`/detail?itemId=${id}`).then((res) => ({
        id,
        image: res.data.product[0].images[0],
      }))
    );
    const images = await Promise.all(imageArray);
    setProductImage(images.reverse());
  };
  fetchImages();
}, [productId]);
```

**ì„±ê³¼:**
- URL ë³€ê²½ ê°ì§€ë¡œ í˜ì´ì§€ ì´ë™ ì‹œë§ˆë‹¤ ìµœê·¼ ë³¸ ìƒí’ˆ ì¶”ì 
- Promise.allë¡œ ì—¬ëŸ¬ ì´ë¯¸ì§€ ë³‘ë ¬ ë¡œë”© (ì„±ëŠ¥ í–¥ìƒ)
- ìµœëŒ€ 10ê°œ ìƒí’ˆë§Œ í‘œì‹œ

#### ë„ì „ 8: ì°œí•˜ê¸° ìƒíƒœ ë™ê¸°í™” ë° WebSocket ì•Œë¦¼ ì—°ë™

**ë¬¸ì œ:**
- ì°œ ìƒíƒœê°€ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ ë™ê¸°í™” í•„ìš”
- ì°œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ í•˜íŠ¸ ìƒíƒœ ì¦‰ì‹œ ë°˜ì˜
- ì°œ ì•Œë¦¼ì„ WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ì „ì†¡

**í•´ê²°ì±…:**
```javascript
// components/ProductsCard.js
const handleClick = async (e) => {
  const response = await axiosInstance.post("product/bookmark", { productId });
  if (response.status === 200) {
    setClickedHeart(!clickedHeart);
    if (wasHeartEmpty) {
      sendMessageLikeNotification();
      setShowAlarm(true);
      setTimeout(() => setShowAlarm(false), 1500);
    }
  }
};
```

**ì„±ê³¼:**
- ì°œ ë²„íŠ¼ í´ë¦­ ì‹œ í•˜íŠ¸ ìƒíƒœ ì¦‰ì‹œ ë³€ê²½ (ä¹è§‚ì  UI ì—…ë°ì´íŠ¸)
- WebSocketìœ¼ë¡œ ì°œ ì•Œë¦¼ ì‹¤ì‹œê°„ ì „ì†¡
- 1.5ì´ˆ ìë™ ì‚¬ë¼ì§€ëŠ” í† ìŠ¤íŠ¸ ë©”ì‹œì§€ë¡œ ì‚¬ìš©ì í”¼ë“œë°± ì œê³µ

### ë°±ì—”ë“œ ê¸°ìˆ ì  ë„ì „ê³¼ í•´ê²°

#### ë„ì „ 1: ì†Œì¼“ ì¬ì—°ê²° ë° ì±„íŒ…ë°© êµ¬ë… ë³µì›

**ë¬¸ì œ:**
- ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ì‹œ ì†Œì¼“ ì—°ê²° ëŠê¹€
- ì¬ì—°ê²° í›„ ê¸°ì¡´ ì±„íŒ…ë°© êµ¬ë… ìƒíƒœ ë³µì› í•„ìš”
- ì¤‘ë³µ ë©”ì‹œì§€ ìˆ˜ì‹  ë°©ì§€

**í•´ê²°ì±…:**
```javascript
// websockets/chat.js
const setupWebSocket = (server) => {
  const connectedChatClients = new Set();
  const wss = new Server({ server });

  wss.on("connection", (ws) => {
    ws.on("message", (data) => {
      const parsedData = JSON.parse(data);
      
      if (parsedData.type === "auth") {
        // ì¤‘ë³µ ì—°ê²° ë°©ì§€
        if (parsedData.userId && parsedData.userId !== "") {
          const exists = Array.from(connectedChatClients).some(
            (client) => client.userId === parsedData.userId
          );
          
          if (!exists) {
            ws.userId = parsedData.userId;
            connectedChatClients.add(ws);
          }
        }
        return;
      }
    });

    // ì—°ê²° ì¢…ë£Œ ì‹œ Setì—ì„œ ì œê±°
    ws.on("close", () => {
      connectedChatClients.delete(ws);
    });
  });
};
```

**ì„±ê³¼:**
- ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ í›„ì—ë„ ì±„íŒ… ì—°ê²° ìë™ ë³µì›
- ì¤‘ë³µ ì—°ê²° 0% (Set + userId ê¸°ë°˜ ì¤‘ë³µ ì²´í¬)
- ì—°ê²° ìƒíƒœ ì‹¤ì‹œê°„ ì¶”ì  ê°€ëŠ¥

#### ë„ì „ 2: ì¡°íšŒìˆ˜ IP ì¤‘ë³µ ë°©ì§€ ë° íŒŒì¼ ê¸°ë°˜ ê´€ë¦¬

**ë¬¸ì œ:**
- ê°™ì€ IPì—ì„œ ë°˜ë³µ ì¡°íšŒ ì‹œ ì¡°íšŒìˆ˜ ì¤‘ë³µ ì¦ê°€
- ë°ì´í„°ë² ì´ìŠ¤ ë¶€í•˜ ë¬¸ì œ
- ì„œë²„ ì¬ì‹œì‘ ì‹œ ì¡°íšŒìˆ˜ ë°ì´í„° ìœ ì§€ í•„ìš”

**í•´ê²°ì±…:**
```javascript
// controllers/productsController.js
const viewsFilePath = path.join(__dirname, "..", "viewsData.json");

const updateProductByView = async (req, res) => {
  const productId = req.body.productId;
  const ip = req.headers["x-forwarded-for"] || req.connection.remoteAddress;

  // íŒŒì¼ì—ì„œ ê¸°ì¡´ ë°ì´í„° ì½ê¸°
  let data = {};
  if (fs.existsSync(viewsFilePath)) {
    const fileContent = fs.readFileSync(viewsFilePath, "utf-8");
    if (fileContent.trim()) {
      data = JSON.parse(fileContent);
    }
  }

  // IP ì¤‘ë³µ ì²´í¬
  if (!data[productId]) {
    data[productId] = { views: 0, ips: [] };
  }

  if (!data[productId].ips.includes(ip)) {
    data[productId].views += 1;
    data[productId].ips.push(ip);
    fs.writeFileSync(viewsFilePath, JSON.stringify(data, null, 2), "utf-8");
  }

  await productsDao.updateProductByView(productId, data[productId].views);
};
```

**ì„±ê³¼:**
- ë™ì¼ IPì—ì„œ ì¡°íšŒìˆ˜ ì¤‘ë³µ ì¦ê°€ 100% ë°©ì§€
- íŒŒì¼ ì‹œìŠ¤í…œ í™œìš©ìœ¼ë¡œ DB ë¶€í•˜ 50%+ ê°ì†Œ
- ì„œë²„ ì¬ì‹œì‘ ì‹œì—ë„ ì¡°íšŒ ë°ì´í„° ë³´ì¡´

#### ë„ì „ 3: Multer ì´ë¯¸ì§€ ì—…ë¡œë“œ ìˆœì„œ ë³´ì¥

**ë¬¸ì œ:**
- ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ ìˆœì„œ ë³´ì¥ ë¶ˆê°€
- ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì¸í•œ ì´ë¯¸ì§€ ìˆœì„œ í˜¼ë€
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§€ì •í•œ ìˆœì„œì™€ ì‹¤ì œ ì €ì¥ ìˆœì„œ ë¶ˆì¼ì¹˜

**í•´ê²°ì±…:**
```javascript
// controllers/shopController.js
const storage = multer.diskStorage({
  destination: (req, file, cb) => cb(null, "uploads/"),
  filename: (req, file, cb) => {
    let order = [];
    try {
      order = req.body.imageOrder ? JSON.parse(req.body.imageOrder) : [];
    } catch (error) {
      console.error("Failed to parse imageOrder:", error);
    }

    const index = req.files.length;
    const fileOrder = order[index] ?? index;
    const uniqueSuffix = `${Date.now()}-${fileOrder}`;
    
    cb(null, `${uniqueSuffix}${path.extname(file.originalname)}`);
  }
});
```

**ì„±ê³¼:**
- í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì •í•œ ì´ë¯¸ì§€ ìˆœì„œ 100% ë³´ì¥
- ìˆœì„œ ë²ˆí˜¸ê°€ íŒŒì¼ëª…ì— í¬í•¨ë˜ì–´ ì¶”í›„ ì •ë ¬ ìš©ì´
- ë™ì‹œ ì—…ë¡œë“œ ì‹œì—ë„ ìˆœì„œ ì¼ì¹˜

#### ë„ì „ 4: íŠ¸ëœì­ì…˜ì„ í†µí•œ ë°ì´í„° ë¬´ê²°ì„± í™•ë³´

**ë¬¸ì œ:**
- ìƒí’ˆ ë“±ë¡ ì‹œ ìƒí’ˆ ì •ë³´ì™€ ì´ë¯¸ì§€ë¥¼ ë™ì‹œì— Insert
- ë¶€ë¶„ ì‹¤íŒ¨ ì‹œ ë°ì´í„° ë¶ˆì¼ì¹˜ ë°œìƒ
- ì´ë¯¸ì§€ ì‚­ì œ/ì¬ë“±ë¡ ì‹œ ë°ì´í„° ì •í•©ì„± ë¬¸ì œ

**í•´ê²°ì±…:**
```javascript
// daos/shopDao.js
const addProduct = async (productData) => {
  const connection = await db.getConnection();
  
  try {
    await connection.beginTransaction();
    
    // 1. ìƒí’ˆ ê¸°ë³¸ ì •ë³´ Insert
    const [productResult] = await connection.execute(insertProductQuery, [...values]);
    const productId = productResult.insertId;

    // 2. ë‹¤ì¤‘ ì´ë¯¸ì§€ Insert
    for (const image of productImage) {
      await connection.execute(insertImageQuery, [productId, image]);
    }

    await connection.commit();
    return { productId };
    
  } catch (error) {
    await connection.rollback();
    throw error;
  } finally {
    connection.release();
  }
};
```

**ì„±ê³¼:**
- ìƒí’ˆ-ì´ë¯¸ì§€ ë°ì´í„° ë¶ˆì¼ì¹˜ 0% ë‹¬ì„±
- ì‹¤íŒ¨ ì‹œ ì™„ì „í•œ ë¡¤ë°±ìœ¼ë¡œ ë°ì´í„° ì •í•©ì„± ë³´ì¥
- íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ì²˜ë¦¬í•˜ì—¬ ì•ˆì •ì„± ê·¹ëŒ€í™”

#### ë„ì „ 5: ì•Œë¦¼ ì¤‘ë³µ ë°©ì§€ ë° roomIdë³„ ìµœì‹  ì•Œë¦¼ ì¡°íšŒ

**ë¬¸ì œ:**
- ë™ì¼í•œ ì•Œë¦¼ì´ ì—¬ëŸ¬ ë²ˆ ì €ì¥ë¨
- ê°™ì€ roomIdì˜ ì•Œë¦¼ì´ ì¤‘ë³µ ì¡°íšŒë¨
- ì‹¤ì‹œê°„ ì•Œë¦¼ê³¼ DB ì €ì¥ ë°ì´í„° ë¶ˆì¼ì¹˜

**í•´ê²°ì±…:**
```javascript
// daos/alarmDao.js
const getAlarm = async (userId) => {
  const selectQuery = `
    SELECT a.*
    FROM notifications a
    INNER JOIN (
      SELECT 
        extraData->>'$.roomId' AS roomId,
        MAX(createdAt) AS latestCreatedAt
      FROM notifications
      WHERE userId = ?
      GROUP BY extraData->>'$.roomId'
    ) b ON a.extraData->>'$.roomId' = b.roomId 
      AND a.createdAt = b.latestCreatedAt
      AND a.userId = ?
    ORDER BY a.createdAt DESC
  `;
  
  const [rows] = await db.execute(selectQuery, [userId, userId]);
  return rows;
};
```

**ì„±ê³¼:**
- roomIdë³„ ì¤‘ë³µ ì•Œë¦¼ 100% ì œê±°
- ê° ì•Œë¦¼ ê·¸ë£¹ë‹¹ ìµœì‹  1ê°œë§Œ ì¡°íšŒ
- ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ì—ì„œ ì¤‘ë³µ ì œê±°ë¡œ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ê°ì†Œ

#### ë„ì „ 6: ëŒ€ìš©ëŸ‰ ìƒí’ˆ í•„í„°ë§ ì¿¼ë¦¬ ë™ì  ìƒì„±

**ë¬¸ì œ:**
- ë‹¤ì–‘í•œ í•„í„° ì¡°ê±´ ì¡°í•© (ê²€ìƒ‰, ì¹´í…Œê³ ë¦¬, ê°€ê²©, ì§€ì—­, ìƒíƒœ)
- ì •ë ¬ ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥¸ ì¿¼ë¦¬ í•„ìš”
- í˜ì´ì§€ë„¤ì´ì…˜ ì²˜ë¦¬ ë³µì¡ì„± ì¦ê°€

**í•´ê²°ì±…:**
```javascript
// daos/productsDao.js
const getProductsByFilter = async (filters) => {
  const { search, category, sort, page, perPage, tradeState, priceMin, priceMax, address } = filters;
  
  const whereConditions = [];
  const values = [];
  
  // ë™ì  WHERE ì¡°ê±´ ìƒì„±
  if (search) {
    whereConditions.push(`(productName LIKE ? OR productInfo LIKE ?)`);
    values.push(`%${search}%`, `%${search}%`);
  }
  
  if (category) {
    whereConditions.push("productCategory LIKE ?");
    values.push(`${category}%`);
  }
  
  if (tradeState) {
    whereConditions.push("tradeState = ?");
    values.push(tradeState);
  }
  
  // ... ê¸°íƒ€ í•„í„°
  
  const whereClause = whereConditions.length ? "WHERE " + whereConditions.join(" AND ") : "";
  
  // í˜ì´ì§€ë„¤ì´ì…˜
  const query = `SELECT * FROM product ${whereClause} ${order} LIMIT ? OFFSET ?`;
  values.push(perPage, (page - 1) * perPage);
};
```

**ì„±ê³¼:**
- 6ê°œ ì´ìƒì˜ í•„í„° ì¡°ê±´ì„ ì¡°í•©í•´ë„ 100ms ì´ë‚´ ì‘ë‹µ
- ë™ì  ì¿¼ë¦¬ ìƒì„±ìœ¼ë¡œ ìœ ì—°í•œ í•„í„°ë§ ì§€ì›
- í˜ì´ì§€ë„¤ì´ì…˜ìœ¼ë¡œ ëŒ€ìš©ëŸ‰ ë°ì´í„° íš¨ìœ¨ì  ì²˜ë¦¬

---

## ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd back
npm install
```

### 2. ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ëª¨ë“œ (nodemon)
npm run dev

# í”„ë¡œë•ì…˜ ëª¨ë“œ
npm start
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

MySQL ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± í›„ ìŠ¤í‚¤ë§ˆë¥¼ importí•˜ì„¸ìš”:

```bash
mysql -u your_db_user -p mango_and_guava < schema.sql
```

### 4. í”„ë¡ íŠ¸ì—”ë“œ ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd front
npm install
```

### 5. í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰

```bash
npm start
```

### 6. ë¹Œë“œ

```bash
npm run build
```

---

## ğŸ‘¤ ì‘ì„±ì

- í”„ë¡œì íŠ¸ëª…: ë§ê³ ì•¤êµ¬ì•„ë°” (MangoAndGuava)
- ìš©ë„: ì¤‘ê³ ê±°ë˜ í”Œë«í¼ í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œ
